# 查看IP

## windows环境

ipconfig



## linux环境

### ifconfig

### ip addr

这条命令显示这台机器上的所有网卡，大部分网卡会有一个IP地址

IP地址是一个网卡在网络世界的通讯地址，相当于现实世界的门牌号

所以IP地址不能设置成一样，否则就会造成IP地址冲突



## IP地址分类

![image-20211107195151664](C:\Users\gaoxiang7\AppData\Roaming\Typora\typora-user-images\image-20211107195151664.png)



## 不同类型IP的承载力

![image-20211107195313155](C:\Users\gaoxiang7\AppData\Roaming\Typora\typora-user-images\image-20211107195313155.png)





# 无类型域间选路（CIDR）

因为32位IP地址不够用，且还被分成了5类，所以有了折中的方式，叫做无类型域间选路，简称CIDR，这种方式打破了原来设计的几类地址，将32位的IP地址一分为二，前面是网络号，后面是主机号

## CIDR示例

192.168.0.169/24

这个IP地址的后面有一个'/'，这种地址表示形式就是CIDR，后面的24意思是，32位中，前24位是网络号，后8位是主机号



## 广播地址

伴随着CIDR存在的，一个是广播地址，brd 192.168.0.255，如果发送这个地址，所有192.168.0.xxx网络里面的机器都可以收到。



## 子网掩码

另一个是子网掩码，netmask 255.255.255.0

子网掩码和IP地址按位与得到的就是IP的网络号



## 常考类型题

给定16.158.165.91/22 这个CIDR

求这个网络IP的第一个地址，子网掩码和广播地址

1. 由CIDR规则网络号和主机号以22位分割，前22位是网络号，后10位是主机号
2. 先确定网络号（即主机号全0的情况）
   1. 第3个8位占据24位，所以分割点22在第三个8位的165这里
   2. 165转化二进制为10100101，低两位是主机号，所以需要165 - 1 = 164
   3. 即网络号是16.158.164.0
3. 确定网络号后，第一个IP地址就是主机号为1的情况，即16.158.164.1
4. 再确认子网掩码
   1. 子网掩码需要将网络号透传，所以它的第3个8位需要透传出164，即第3个8位的高6位，255 - 3 = 252
   2. 所以子网掩码为：255.255.252.0
5. 最后确认广播地址
   1. 广播地址即主机号全1的情况，其中包括第4个8位和第3个8位中的第2位，即第三个8位的网络号164，需要加上2位的主机号，即164 + 3 = 167
   2. 所以广播地址为16.158.167.255





# 公有IP和私有IP

平时看到的数据中心，办公室或家庭、学校的IP地址，一般都是私有IP地址段。这些地址允许组织内部的IT人员自行管理自行分配，而且可以重复。

公有IP地址由组织同一分配，需要购买。如果需要搭建网站，给一个组织内部或家庭内部使用，可以直接让路由器自动分配一个IP地址。但如果要建立一个类似bilibili这样的网站，想让所有人都能访问，就需要拥有公有IP地址。

